<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.tjint.springboot.common.imageFile.service.impl.ImageMapper">

    <insert id="addImageFile" parameterType="newImageDTO">
        /* [AdminApiImage.xml].[addImageFileInfo] */
        INSERT INTO app_image_file_info_test
        ( board_type_cd
        , board_seq
        , image_type_cd
        , image_file_id
        , image_file_seq
        , sort_order
        , visible
        , creator
        , create_time
        , updater
        , update_time)
        VALUES ( #{boardTypeCd}
               , #{boardSeq}
               , #{imageTypeCd}
               , #{imageFileId}
               , #{imageFileSeq}
               , #{sortOrder}
               , #{visible}
               , #{updater}
               , NOW()
               , #{updater}
               , NOW())
    </insert>

    <insert id="addAttachFile" parameterType="newNewsDto">
        /* [AdminApiImage.xml].[addAttachFile] */
        INSERT INTO J_ATTACHFILE_TEST
        (FILE_ID,
         FILE_SEQ,
         FILE_NAME,
         FILE_SIZE,
         FILE_MASK,
         FILE_PATH,
         DOWNLOAD_COUNT,
         DOWNLOAD_EXPIRE_DATE,
         DOWNLOAD_LIMIT_COUNT,
         REG_DATE,
         DELETE_YN,
         FILE_BOARD_SEQ)
        VALUES (#{fileId},
                #{fileSeq},
                #{filename},
                #{fileSize},
                #{fileMask},
                #{filePath},
                #{downloadCnt},
                #{downloadExpireDate},
                #{downloadLimitCnt},
                now(),
                #{deleteYn},
                #{fileBoardSeq})
    </insert>

    <delete id="deleteAttachFile" parameterType="newImageDTO">
        /* [Common_imageFile_SQL.xml].[deleteAttachFile] */
        DELETE
        FROM J_ATTACHFILE_TEST
        WHERE FILE_BOARD_SEQ = #{fileBoardSeq}
    </delete>

    <delete id="deleteImageFile" parameterType="newImageDTO">
        /* [Common_imageFile_SQL.xml].[deleteImageFile] */
        DELETE
        FROM app_image_file_info_test
        WHERE board_seq = #{boardSeq}
    </delete>
</mapper>
